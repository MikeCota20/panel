{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mrmik\\\\Desktop\\\\panel\\\\panel\\\\src\\\\pages\\\\ChapterView.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport axios from 'axios';\nimport LightGallery from 'lightgallery/react';\nimport 'lightgallery/css/lightgallery.css';\nimport { useParams } from 'react-router-dom'; // Para obtener el ID de la URL\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Viewer() {\n  _s();\n  const {\n    id\n  } = useParams(); // Obtiene el ID del capítulo desde la URL\n  const [pages, setPages] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const lightGalleryRef = useRef(null); // Referencia para controlar la galería\n\n  // Fetch de las páginas del capítulo desde la API\n  useEffect(() => {\n    const fetchPages = async () => {\n      try {\n        const response = await axios.get(`http://localhost:5000/api/chapters/${id}/pages`);\n        setPages(response.data);\n      } catch (error) {\n        console.error('Error fetching pages:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchPages();\n  }, [id]); // Se ejecuta cada vez que cambia la ID del capítulo\n\n  // Manejador para abrir la galería en la primera imagen\n  const openGalleryOnFirstImage = () => {\n    if (lightGalleryRef.current && pages.length > 0) {\n      lightGalleryRef.current.openGallery(0); // Abre la galería en el primer slide\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"PanelView\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(LightGallery, {\n      ref: lightGalleryRef,\n      speed: 500,\n      dynamic: true,\n      dynamicEl: pages.map(page => ({\n        src: `/comics/${page.image_url}`,\n        // URL de la imagen\n        thumb: `/comics/${page.image_url}`,\n        // Miniatura de la imagen\n        subHtml: `<p>Page ${page.page_number}</p>` // Texto adicional opcional\n      })),\n      children: pages.length > 0 && /*#__PURE__*/_jsxDEV(\"a\", {\n        href: `/comics/${pages[0].image_url}`,\n        onClick: e => {\n          e.preventDefault(); // Previene la navegación\n          openGalleryOnFirstImage();\n        },\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: `/comics/${pages[0].image_url}`,\n          alt: `Page ${pages[0].page_number}`,\n          style: {\n            width: '100%',\n            cursor: 'pointer'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'none'\n      },\n      children: pages.slice(1).map(page => /*#__PURE__*/_jsxDEV(\"a\", {\n        href: `/comics/${page.image_url}`,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: `/comics/${page.image_url}`,\n          alt: `Page ${page.page_number}`,\n          style: {\n            width: '100%',\n            cursor: 'pointer'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this)\n      }, page.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n}\n_s(Viewer, \"HcW9iR88j9TpZmyGtmFFYt1fyHY=\", false, function () {\n  return [useParams];\n});\n_c = Viewer;\nexport default Viewer;\nvar _c;\n$RefreshReg$(_c, \"Viewer\");","map":{"version":3,"names":["React","useEffect","useRef","useState","axios","LightGallery","useParams","jsxDEV","_jsxDEV","Viewer","_s","id","pages","setPages","loading","setLoading","lightGalleryRef","fetchPages","response","get","data","error","console","openGalleryOnFirstImage","current","length","openGallery","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","speed","dynamic","dynamicEl","map","page","src","image_url","thumb","subHtml","page_number","href","onClick","e","preventDefault","alt","style","width","cursor","display","slice","_c","$RefreshReg$"],"sources":["C:/Users/mrmik/Desktop/panel/panel/src/pages/ChapterView.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport axios from 'axios';\r\nimport LightGallery from 'lightgallery/react';\r\nimport 'lightgallery/css/lightgallery.css';\r\nimport { useParams } from 'react-router-dom'; // Para obtener el ID de la URL\r\n\r\nfunction Viewer() {\r\n  const { id } = useParams(); // Obtiene el ID del capítulo desde la URL\r\n  const [pages, setPages] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const lightGalleryRef = useRef(null); // Referencia para controlar la galería\r\n\r\n  // Fetch de las páginas del capítulo desde la API\r\n  useEffect(() => {\r\n    const fetchPages = async () => {\r\n      try {\r\n        const response = await axios.get(`http://localhost:5000/api/chapters/${id}/pages`);\r\n        setPages(response.data);\r\n      } catch (error) {\r\n        console.error('Error fetching pages:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchPages();\r\n  }, [id]); // Se ejecuta cada vez que cambia la ID del capítulo\r\n\r\n  // Manejador para abrir la galería en la primera imagen\r\n  const openGalleryOnFirstImage = () => {\r\n    if (lightGalleryRef.current && pages.length > 0) {\r\n      lightGalleryRef.current.openGallery(0); // Abre la galería en el primer slide\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <p>Loading...</p>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>PanelView</h1>\r\n      <LightGallery\r\n        ref={lightGalleryRef}\r\n        speed={500}\r\n        dynamic\r\n        dynamicEl={pages.map((page) => ({\r\n          src: `/comics/${page.image_url}`, // URL de la imagen\r\n          thumb: `/comics/${page.image_url}`, // Miniatura de la imagen\r\n          subHtml: `<p>Page ${page.page_number}</p>`, // Texto adicional opcional\r\n        }))}\r\n      >\r\n        {/* Primera imagen que abre la galería */}\r\n        {pages.length > 0 && (\r\n          <a href={`/comics/${pages[0].image_url}`} onClick={(e) => {\r\n            e.preventDefault(); // Previene la navegación\r\n            openGalleryOnFirstImage();\r\n          }}>\r\n            <img\r\n              src={`/comics/${pages[0].image_url}`}\r\n              alt={`Page ${pages[0].page_number}`}\r\n              style={{ width: '100%', cursor: 'pointer' }}\r\n            />\r\n          </a>\r\n        )}\r\n      </LightGallery>\r\n\r\n      {/* Renderiza las demás imágenes */}\r\n      <div style={{ display: 'none' }}>\r\n        {pages.slice(1).map((page) => (\r\n          <a href={`/comics/${page.image_url}`} key={page.id}>\r\n            <img\r\n              src={`/comics/${page.image_url}`}\r\n              alt={`Page ${page.page_number}`}\r\n              style={{ width: '100%', cursor: 'pointer' }}\r\n            />\r\n          </a>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Viewer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}